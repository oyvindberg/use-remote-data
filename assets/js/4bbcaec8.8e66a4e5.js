(self.webpackChunksite=self.webpackChunksite||[]).push([[4],{8005:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return o}});var a=n(7294),r=n(9296);var o=function(){var e=(0,r.WV)((function(){return e=1,void 0===t&&(t=1e3),new Promise((function(n){return setTimeout((function(){return n(e)}),t)}));var e,t}));return a.createElement(r.mJ,{store:e},(function(e){return a.createElement("span",null,e)}))}},7934:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return l}});var a=n(7294),r=n(9296);function o(e,t){return void 0===t&&(t=1e3),new Promise((function(n){return setTimeout((function(){return n(e)}),t)}))}var l=function(){var e=(0,r.WV)((function(){return o(1)})),t=(0,r.WV)((function(){return o("Hello")})),n=r.lq.all(e,t);return a.createElement(r.mJ,{store:n},(function(e){var t=e[0],n=e[1];return a.createElement("span",null,t," and ",n)}))}},4872:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return u}});var a=n(7294),r=n(9296),o=0,l=function(){return new Promise((function(e){o+=1,setTimeout((function(){return e(o)}),1e3)}))},s=0,i=function(){return new Promise((function(e,t){(s+=1)%10==0?t(s+" was dividable by 10"):e(s)}))},u=function(){var e=(0,r.WV)(l,{ttlMillis:1e3}),t=(0,r.WV)(i,{ttlMillis:100});return a.createElement(r.mJ,{store:r.lq.all(e,t)},(function(e){var t=e[0],n=e[1];return a.createElement("span",null,t," - ",n)}))}},7172:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return s}});var a=n(7294),r=n(9296),o=0,l=function(){return new Promise((function(e){o+=1,setTimeout((function(){return e(o)}),1e3)}))},s=function(){var e=(0,r.WV)(l,{ttlMillis:2e3});return a.createElement(r.mJ,{store:e},(function(e,t){return a.createElement("span",{style:{color:t?"darkgray":"black"}},e)}))}},8944:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return s},Child:function(){return i}});var a=n(7294),r=n(9296),o=0,l=function(){return new Promise((function(e){var t=o+=1;setTimeout((function(){return e(t)}),1e3)}))},s=function(){for(var e=[],t=0;t<20;t++)e.push((0,r.WV)(l,{ttlMillis:500*t}));return a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},a.createElement(i,{stores:e}),a.createElement(i,{stores:e}))},i=function(e){var t=e.stores.map((function(e,t){return a.createElement(r.mJ,{store:e,key:t},(function(e,t){return a.createElement("p",null,a.createElement("span",{style:{color:t?"darkgray":"black"}},e))}))}));return a.createElement("div",null,t)}},3426:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return s},Child:function(){return i}});var a=n(7294),r=n(9296),o=0,l=function(){return new Promise((function(e){o+=1,setTimeout((function(){return e(o)}),1e3)}))},s=function(){var e=(0,r.WV)(l,{ttlMillis:2e3});return a.createElement("div",null,a.createElement(i,{store:e}),a.createElement(i,{store:e}))},i=function(e){var t=e.store;return a.createElement(r.mJ,{store:t},(function(e,t){return a.createElement("p",null,a.createElement("span",{style:{color:t?"darkgray":"black"}},e))}))}},5561:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7294),r=n(986),o=n(7499),l=n(6742),s=n(2026),i="//START\n",u=function(e){var t=e.snippet,r=(0,s.Z)().isDarkTheme?n(9452).Z:n(4146).Z,u=n(5362)("./"+t+".tsx").default,c=u.indexOf(i),m=-1===c?u:u.substring(c+i.length),d=n(2523)("./"+t).Component,h=a.useState(0),p=h[0],f=h[1];return a.createElement("div",null,a.createElement("div",null,a.createElement("div",null,a.createElement(l.Z,{className:"button button--secondary button--sm",onClick:function(){return f(p+1)}},0===p?"Run snippet":"Run again")),p>0&&a.createElement(d,{key:p})),a.createElement(o.Z,{language:"typescript",style:r},m))},c=function(){return a.createElement(r.Z,{title:"Getting started",description:"Getting started"},a.createElement("main",{className:"container"},a.createElement("h1",null,"Getting started"),a.createElement("div",null,a.createElement("h2",null,"Installation"),a.createElement("pre",null,a.createElement("code",null,"yarn add use-remote-data"))),a.createElement("br",null),a.createElement("div",null,a.createElement("h2",null,"Basic usage"),"The entry point to the library is a React hook called ",a.createElement("code",null,"useRemoteData"),", which takes one parameter: A function which produces a ",a.createElement("code",null,"Promise"),". It needs to be a function and not a straight ",a.createElement("code",null,"Promise"),"in case it fails and needs to be restarted.",a.createElement("br",null),a.createElement("br",null),"According to the rules for React hooks they can only be used within a component, as seen below.",a.createElement("br",null),a.createElement("br",null),"The thing we get back is a ",a.createElement("code",null,"RemoteDataStore","<T>"),", which is where we keep the state the request is currently in.",a.createElement("br",null),a.createElement("br",null),"The last thing which happens in this example is that we use a provided React component called"," ",a.createElement("code",null,"WithRemoteData"),". This component requires two props:",a.createElement("ul",null,a.createElement("li",null,"the store we got from ",a.createElement("code",null,"useRemoteData")),a.createElement("li",null,"a ",a.createElement(l.Z,{to:"https://reactjs.org/docs/render-props.html"},"render prop "),"which specifies how to render once we have all the data we asked for by passing stores")),"Out of the box this component renders dots when waiting for data. Expected usage is that you copy/paste it into your codebase and adjust the rendering to suit your needs",a.createElement(u,{snippet:"basic_usage"})),a.createElement("br",null),a.createElement("div",null,a.createElement("h2",null,"Combining stores"),"The ",a.createElement("code",null,"RemoteDataStore")," structure is composable in the sense that you can combine multiple stores into one which will return the product of all once all the data is available. The semantics are what you would expect. For instance if you combine one request which is currently"," ",a.createElement("code",null,"RemoteData.Pending"),"with one which is ",a.createElement("code",null,"RemoteData.Yes"),", the result will be ",a.createElement("code",null,"RemoteData.Pending"),".",a.createElement("br",null),a.createElement("br",null),"All types are tracked, and in the render prop given to ",a.createElement("code",null,"WithRemoteData")," we use ",a.createElement(l.Z,{to:"https://levelup.gitconnected.com/crazy-powerful-typescript-tuple-types-9b121e0a690c"},"tuple destructuring "),"to pick apart the values again.",a.createElement("br",null),a.createElement("br",null),a.createElement(u,{snippet:"combine"}),a.createElement("h3",null,"A note about Typescript tooling"),"The Typescript compiler knows everything about the types here. As does Intellij, but it's currently not flawless. This video demonstrates how you can press ",a.createElement("code",null,"ctrl")," while hovering with the mouse to see types. It also demonstrates how you sometimes need to write types yourself if you want them written down.",a.createElement("br",null),a.createElement("br",null),a.createElement("video",{autoPlay:!0,controls:!0,muted:!0,src:"typesafe-combine.mp4"})),a.createElement("br",null),a.createElement("br",null),a.createElement("div",null,a.createElement("h2",null,"Refreshing data"),a.createElement("code",null,"use-remote-data")," supports seamless invalidation and refreshing of data, by specifying the optional",a.createElement("code",null,"ttlMillis")," parameter to ",a.createElement("code",null,"use-remote-data"),". You specify how many milliseconds the data is valid after it is received.",a.createElement("br",null),a.createElement("br",null),"Once the data is deemed invalidated, you are informed through the second ",a.createElement("code",null,"isInvalidated"),"argument in the render prop given to ",a.createElement("code",null,"WithRemoteData"),". With that bit of information you can for instance render the old data as gray or deactivated while the application is waiting for fresh data.",a.createElement("br",null),a.createElement("br",null),"Note that since the design of ",a.createElement("code",null,"RemoteDataStore")," is ",a.createElement("em",null,"Lazy"),", values are only invalidated and refreshed ",a.createElement("em",null,"while the data is used by a component"),". However, on first render afterwards the invalidation is noticed and you'll be informed through ",a.createElement("code",null,"isInvalidated")," as normal.",a.createElement(u,{snippet:"invalidation"})),a.createElement("div",null,a.createElement("h2",null,"Sharing data with child components"),"A very common use-case is that you have an app with for instance many routes. Each route will need some different subsets of data, and you want to keep as much data as possible cached when the user navigates back and forth.",a.createElement("br",null),a.createElement("br",null),a.createElement("code",null,"use-remote-data")," supports this use-case very well because ",a.createElement("code",null,"RemoteDataStore")," is",a.createElement("em",null,"Lazy")," and ",a.createElement("em",null,"Caching"),". You can define all the relevant data stores high up in the hierarchy, and data lifetimes neatly follows component lifecycles. You can then freely pass a store to any number of code paths, and the data will only be fetched once.",a.createElement("br",null),a.createElement("br",null),a.createElement("h3",null,"Should I pass RemoteDataStore","<T>"," or just T? "),"There has been some confusion about this, but there is a semantic difference.",a.createElement("em",null,"Can this component render without the data?"),"Typically you may want to draw an outline of the application before you get any data, and the components which do that should probably accept a",a.createElement("code",null,"RemoteDataStore")," in props.",a.createElement("br",null),a.createElement("br",null),"In most other cases it's better to just pass the value after it has been retrieved, for the singular reason that it's simpler.",a.createElement(u,{snippet:"use_twice"})),a.createElement("div",null,a.createElement("h2",null,"Handling failure"),"Another defining feature of ",a.createElement("code",null,"use-remote-data")," is the principled error handling and the retry functionality. Developers typically make an ad-hoc attempt at the former, while not many have the discipline to also do the latter.",a.createElement("br",null),a.createElement("br",null),"This example creates a ",a.createElement("code",null,"Promise")," which fails every tenth time it is called. The sometimes-failing store is combined with another store which never fails, and you should hit ",a.createElement("em",null,"retry "),"a few times to see the interaction.",a.createElement(u,{snippet:"handling_failure"})),a.createElement("div",null,a.createElement("h2",null,"Many stores"),"React hooks have ",a.createElement(l.Z,{to:"https://reactjs.org/docs/hooks-rules.html"},"quite a few rules")," surrounding, and the most limiting is that you need to call hooks in the same number and sequence each rendering pass. This is just to show off that at least the easiest case works, but beware that anything more dynamic will cause some problems.",a.createElement(u,{snippet:"many"}))))}},208:function(e,t,n){"use strict";n.r(t),t.default='// all examples use these imports\nimport * as React from "react";\nimport { RemoteData, RemoteDataStore, useRemoteData, WithRemoteData } from "use-remote-data";\n\n// we\'ll use this example throughout. obviously you would typically call an API\nfunction produce<T>(value: T, delay: number = 1000): Promise<T> {\n  return new Promise((resolve) => setTimeout(() => resolve(value), delay));\n}\n\nexport const Component: React.FC = () => {\n  const computeOne: RemoteDataStore<number> =\n    useRemoteData(() => produce(1));\n\n  return <WithRemoteData store={computeOne}>\n      {(num: number) => <span>{num}</span>}\n    </WithRemoteData>;\n};\n'},407:function(e,t,n){"use strict";n.r(t),t.default="import * as React from 'react';\nimport { RemoteDataStore, useRemoteData, WithRemoteData } from 'use-remote-data';\n\n// we'll use this example throughout. obviously you would typically call an API\nfunction produce<T>(value: T, delay: number = 1000): Promise<T> {\n    return new Promise((resolve) => setTimeout(() => resolve(value), delay));\n}\n\n//START\nexport const Component: React.FC = () => {\n    const computeOne = useRemoteData(() => produce(1));\n    const computeString = useRemoteData(() => produce('Hello'));\n\n    const combinedStore =\n      RemoteDataStore.all(computeOne, computeString);\n\n    return <WithRemoteData store={combinedStore}>\n            {([num, string]) => <span>{num} and {string}</span>}\n        </WithRemoteData>;\n};\n"},4598:function(e,t,n){"use strict";n.r(t),t.default="import * as React from 'react';\nimport { RemoteDataStore, useRemoteData, WithRemoteData } from 'use-remote-data';\n\nvar i = 0;\nconst freshData = (): Promise<number> =>\n    new Promise((resolve) => {\n        i += 1;\n        setTimeout(() => resolve(i), 1000);\n    });\n\n//START\nvar j = 0;\nconst failSometimes = (): Promise<number> =>\n    new Promise((resolve, reject) => {\n        j += 1;\n        if (j % 10 === 0) reject(`${j} was dividable by 10`);\n        else resolve(j);\n    });\n\nexport const Component: React.FC = () => {\n    const one = useRemoteData(freshData, { ttlMillis: 1000 });\n    const two = useRemoteData(failSometimes, { ttlMillis: 100 });\n\n    return <WithRemoteData store={RemoteDataStore.all(one, two)}>\n            {([num1, num2]) => <span>{num1} - {num2}</span>}\n        </WithRemoteData>;\n};\n"},5136:function(e,t,n){"use strict";n.r(t),t.default="import * as React from 'react';\nimport { RemoteDataStore, useRemoteData, WithRemoteData } from 'use-remote-data';\n\n//START\nvar i = 0;\nconst freshData = (): Promise<number> =>\n    new Promise((resolve) => {\n        i += 1;\n        setTimeout(() => resolve(i), 1000);\n    });\n\nexport const Component: React.FC = () => {\n    const store = useRemoteData(freshData, { ttlMillis: 2000 });\n\n    return (\n        <WithRemoteData store={store}>\n            {(num, isInvalidated) =>\n              <span style={{ color: isInvalidated ? 'darkgray' : 'black' }}>{num}</span>\n            }\n        </WithRemoteData>\n    );\n};\n"},6507:function(e,t,n){"use strict";n.r(t),t.default="import * as React from 'react';\nimport { RemoteDataStore, useRemoteData, WithRemoteData } from 'use-remote-data';\n\nlet i = 0;\nconst freshData = (): Promise<number> =>\n    new Promise((resolve) => {\n        const j = i += 1;\n        setTimeout(() => resolve(j), 1000);\n    });\n\n//START\nexport const Component: React.FC = () => {\n    const stores: RemoteDataStore<number>[] = [];\n    for (let j = 0; j < 20; j++) {\n      stores.push(useRemoteData(freshData, { ttlMillis: 500 * j }))\n    }\n    return (\n        <div style={{display: 'flex', justifyContent: 'space-around'}}>\n            <Child stores={stores} />\n            <Child stores={stores} />\n        </div>\n    );\n};\n\nexport const Child: React.FC<{ stores: ReadonlyArray<RemoteDataStore<number>> }> = ({ stores }) => {\n    const rendered = stores.map((store, idx) => (\n        <WithRemoteData store={store} key={idx}>\n            {(num, isInvalidated) => <p><span style={{ color: isInvalidated ? 'darkgray' : 'black' }}>{num}</span></p>}\n        </WithRemoteData>\n    ));\n    return <div>{rendered}</div>;\n};\n"},5735:function(e,t,n){"use strict";n.r(t),t.default="import * as React from 'react';\nimport { RemoteDataStore, useRemoteData, WithRemoteData } from 'use-remote-data';\n\nvar i = 0;\nconst freshData = (): Promise<number> =>\n    new Promise((resolve) => {\n        i += 1;\n        setTimeout(() => resolve(i), 1000);\n    });\n\n//START\nexport const Component: React.FC = () => {\n    const store = useRemoteData(freshData, { ttlMillis: 2000 });\n\n    return (\n        <div>\n            <Child store={store} />\n            <Child store={store} />\n        </div>\n    );\n};\n\nexport const Child: React.FC<{ store: RemoteDataStore<number> }> = ({ store }) => (\n    <WithRemoteData store={store}>\n        {(num, isInvalidated) =>\n          <p><span style={{ color: isInvalidated ? 'darkgray' : 'black' }}>{num}</span></p>\n        }\n    </WithRemoteData>\n);\n"},5362:function(e,t,n){var a={"./basic_usage.tsx":208,"./combine.tsx":407,"./handling_failure.tsx":4598,"./invalidation.tsx":5136,"./many.tsx":6507,"./use_twice.tsx":5735};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=5362},2523:function(e,t,n){var a={"./basic_usage":8005,"./basic_usage.tsx":8005,"./combine":7934,"./combine.tsx":7934,"./handling_failure":4872,"./handling_failure.tsx":4872,"./invalidation":7172,"./invalidation.tsx":7172,"./many":8944,"./many.tsx":8944,"./use_twice":3426,"./use_twice.tsx":3426};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=2523}}]);