<!doctype html>
<html lang="en" dir="ltr" class="plugin-pages plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Getting started | use-remote-data</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/use-remote-data/intro"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Getting started | use-remote-data"><meta data-rh="true" name="description" content="Getting started"><meta data-rh="true" property="og:description" content="Getting started"><link data-rh="true" rel="icon" href="/use-remote-data/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/use-remote-data/intro"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/use-remote-data/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/use-remote-data/intro" hreflang="x-default"><link rel="stylesheet" href="/use-remote-data/assets/css/styles.2d06176f.css">
<script src="/use-remote-data/assets/js/runtime~main.91ee86e7.js" defer="defer"></script>
<script src="/use-remote-data/assets/js/main.e502f6c4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/use-remote-data/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/use-remote-data/"><div class="navbar__logo"><img src="/use-remote-data/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/use-remote-data/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">use-remote-data</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/use-remote-data/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oyvindberg/use-remote-data" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container"><h1>Getting started</h1><div><h2>Installation</h2><pre><code>yarn add use-remote-data</code></pre></div><br><div><h2>Basic usage</h2>The entry point to the library is a React hook called <code>useRemoteData</code>, which takes one parameter: A function which produces a <code>Promise</code>. It needs to be a function and not a straight <code>Promise</code>in case it fails and needs to be restarted.<br><br>According to the rules for React hooks they can only be used within a component, as seen below.<br><br>The thing we get back is a <code>RemoteDataStore<!-- -->&lt;T&gt;</code>, which is where we keep the state the request is currently in.<br><br>The last thing which happens in this example is that we use a provided React component called<!-- --> <code>WithRemoteData</code>. This component requires two props:<ul><li>the store we got from <code>useRemoteData</code></li><li>a <a href="https://reactjs.org/docs/render-props.html" target="_blank" rel="noopener noreferrer">render prop </a>which specifies how to render once we have all the data we asked for by passing stores</li></ul>Out of the box this component is useful but not pretty. You&#x27;re expected to either copy/paste `WithRemoteData` into your own app and customize it, or wrap it in your own component which customizes pending and failure states.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { RemoteDataStore, useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span class="hljs-function" style="color:#015692">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#b75501">produce</span><span class="hljs-function">&lt;</span><span class="hljs-function" style="color:#b75501">T</span><span class="hljs-function">&gt;(</span><span class="hljs-function hljs-params">value: T, delay: </span><span class="hljs-function hljs-params" style="color:#b75501">number</span><span class="hljs-function hljs-params"> = </span><span class="hljs-function hljs-params" style="color:#b75501">1000</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#b75501">Promise</span><span class="hljs-function">&lt;</span><span class="hljs-function" style="color:#b75501">T</span><span class="hljs-function">&gt; </span><span>{
</span><span>  </span><span style="color:#015692">return</span><span> </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(value), delay));
</span>}
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>  </span><span style="color:#015692">const</span><span> computeOne: RemoteDataStore&lt;</span><span style="color:#b75501">number</span><span>&gt; =
</span><span>    useRemoteData(</span><span class="hljs-function">() =&gt;</span><span> produce(</span><span style="color:#b75501">1</span><span>));
</span>
<span>  </span><span style="color:#015692">return</span><span> </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{computeOne}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">      {(num: number) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">{num}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">    </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>;
</span>};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div></div><br><div><h2>Combining stores</h2>The <code>RemoteDataStore</code> structure is composable in the sense that you can combine multiple stores into one which will return the product of all once all the data is available. The semantics are what you would expect. For instance if you combine one request which is currently<!-- --> <code>RemoteData.Pending</code>with one which is <code>RemoteData.Yes</code>, the result will be <code>RemoteData.Pending</code>.<br><br>All types are tracked, and in the render prop given to <code>WithRemoteData</code> we use<!-- --> <a href="https://levelup.gitconnected.com/crazy-powerful-typescript-tuple-types-9b121e0a690c" target="_blank" rel="noopener noreferrer">tuple destructuring<!-- --> </a>to pick apart the values again.<br><br><div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { RemoteDataStore, useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span class="hljs-function" style="color:#015692">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#b75501">produce</span><span class="hljs-function">&lt;</span><span class="hljs-function" style="color:#b75501">T</span><span class="hljs-function">&gt;(</span><span class="hljs-function hljs-params">value: T, delay: </span><span class="hljs-function hljs-params" style="color:#b75501">number</span><span class="hljs-function hljs-params"> = </span><span class="hljs-function hljs-params" style="color:#b75501">1000</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#b75501">Promise</span><span class="hljs-function">&lt;</span><span class="hljs-function" style="color:#b75501">T</span><span class="hljs-function">&gt; </span><span>{
</span><span>    </span><span style="color:#015692">return</span><span> </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(value), delay));
</span>}
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> computeOne = useRemoteData(</span><span class="hljs-function">() =&gt;</span><span> produce(</span><span style="color:#b75501">1</span><span>));
</span><span>    </span><span style="color:#015692">const</span><span> computeString = useRemoteData(</span><span class="hljs-function">() =&gt;</span><span> produce(</span><span style="color:#54790d">&#x27;Hello&#x27;</span><span>));
</span>
<span>    </span><span style="color:#015692">const</span><span> combinedStore =
</span>      RemoteDataStore.all(computeOne, computeString);
<!-- -->
<span>    </span><span style="color:#015692">return</span><span> </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{combinedStore}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            {([num, string]) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">{num} and {string}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>;
</span>};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div><h3>A note about Typescript tooling</h3>The Typescript compiler knows everything about the types here, as does Intellij. This video demonstrates how you can press <code>ctrl</code> while hovering with the mouse to see types.<br><br><video autoplay="" controls="" muted="" src="/use-remote-data/assets/medias/typesafe-combine-37a96b8d5a32a72484882b73e60806db.webm"></video></div><br><br><div><h2>Refreshing data</h2><code>use-remote-data</code> supports seamless invalidation and refreshing of data, by specifying the optional <code>invalidation</code> parameter to <code>use-remote-data</code>. You specify an invalidation strategy, with for instance how many milliseconds the data is valid after it is received.<br><br>Once the data is deemed invalidated, you are informed through the second <code>isInvalidated</code>argument in the render prop given to <code>WithRemoteData</code>. With that bit of information you can for instance render the old data as gray or deactivated while the application is waiting for fresh data.<br><br>Note that since the design of <code>RemoteDataStore</code> is <em>Lazy</em>, values are only invalidated and refreshed <em>while the data is used by a component</em>. However, on first render afterwards the invalidation is noticed and you&#x27;ll be informed through <code>isInvalidated</code> as normal.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { useRemoteData, WithRemoteData, InvalidationStrategy } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">var</span><span> i = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> freshData = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        i += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(i), </span><span style="color:#b75501">1000</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> store = useRemoteData(freshData, { </span><span style="color:#015692">invalidation</span><span>: InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">2000</span><span>) });
</span>
<span>    </span><span style="color:#015692">return</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            {(num, isInvalidated) =&gt;
</span><span class="xml">                </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">color:</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">isInvalidated</span><span class="xml hljs-tag"> ? &#x27;</span><span class="xml hljs-tag" style="color:#015692">darkgray</span><span class="xml hljs-tag">&#x27; </span><span class="xml hljs-tag" style="color:#015692">:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">black</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">{num}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            }
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>
</span>    );
<!-- -->};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div><br><br><h3>Only sometimes?</h3>If you want to turn auto-refreshing on and off, that easy to do as well, just set the<!-- --> <code>ttlMillis</code>parameter accordingly<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { InvalidationStrategy, useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">var</span><span> i = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> freshData = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        i += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(i), </span><span style="color:#b75501">1000</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> [autoRefresh, setAutoRefresh] = React.useState(</span><span style="color:#b75501">true</span><span>);
</span><span>    </span><span style="color:#015692">const</span><span> store = useRemoteData(freshData, { </span><span style="color:#015692">invalidation</span><span>: autoRefresh ? InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">1000</span><span>) : </span><span style="color:#b75501">undefined</span><span> });
</span>
<span>    </span><span style="color:#015692">return</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">label</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">                Autorefresh:
</span><span class="xml">                </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">input</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">type</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">&quot;checkbox&quot;</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">onChange</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{(e)</span><span class="xml hljs-tag"> =&gt;</span><span class="xml"> setAutoRefresh(!autoRefresh)} checked={autoRefresh} /&gt;
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">label</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">br</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">                {(num, isInvalidated) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">color:</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">isInvalidated</span><span class="xml hljs-tag"> ? &#x27;</span><span class="xml hljs-tag" style="color:#015692">darkgray</span><span class="xml hljs-tag">&#x27; </span><span class="xml hljs-tag" style="color:#015692">:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">black</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">{num}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span>
</span>    );
<!-- -->};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div></div><div><h2>Sharing data with child components</h2>A very common use-case is that you have an app with for instance many routes. Each route will need some different subsets of data, and you want to keep as much data as possible cached when the user navigates back and forth.<br><br><code>use-remote-data</code> supports this use-case well because <code>RemoteDataStore</code> is<em> Lazy </em> and <em> Caching </em>. You can define all the relevant data stores high up in the hierarchy, and data lifetimes neatly follows component lifecycles. You can then freely pass a store to any number of code paths, and the data will only be fetched once.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { InvalidationStrategy, RemoteDataStore, useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">var</span><span> i = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> freshData = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        i += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(i), </span><span style="color:#b75501">1000</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> store = useRemoteData(freshData, { </span><span style="color:#015692">invalidation</span><span>: InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">2000</span><span>) });
</span>
<span>    </span><span style="color:#015692">return</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">Child</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">Child</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span>
</span>    );
<!-- -->};
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Child: React.FC&lt;{ </span><span style="color:#015692">store</span><span>: RemoteDataStore&lt;</span><span style="color:#b75501">number</span><span>&gt; }&gt; = </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">{ store }</span><span class="hljs-function">) =&gt;</span><span> (
</span><span>    </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">        {(num, isInvalidated) =&gt;
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">p</span><span class="xml hljs-tag">&gt;</span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">color:</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">isInvalidated</span><span class="xml hljs-tag"> ? &#x27;</span><span class="xml hljs-tag" style="color:#015692">darkgray</span><span class="xml hljs-tag">&#x27; </span><span class="xml hljs-tag" style="color:#015692">:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">black</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">{num}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">p</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">        }
</span><span class="xml">    </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>
</span>);
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div><br><br><h3>Should I pass RemoteDataStore<!-- -->&lt;T&gt;<!-- --> or just T? </h3>There has been some confusion about this, but there is a semantic difference.<em>Can this component render without the data?</em>Typically you may want to draw an outline of the application before you get any data, and the components which do that should probably accept a<code>RemoteDataStore</code> in props.<br><br>In most other cases it&#x27;s better to just pass the value after it has been retrieved, for the singular reason that it&#x27;s simpler.<br><br></div><div><h2>Handling failure</h2>Another defining feature of <code>use-remote-data</code> is the principled error handling and the retry functionality. Developers typically make an ad-hoc attempt at the former, while not many have the discipline to also do the latter.<br><br>This example creates a <code>Promise</code> which fails every tenth time it is called. The sometimes-failing store is combined with another store which never fails, and you should hit<!-- --> <em>retry </em>a few times to see the interaction.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { InvalidationStrategy, RemoteDataStore, useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">var</span><span> i = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> freshData = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        i += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(i), </span><span style="color:#b75501">1000</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">var</span><span> j = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> failSometimes = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve, reject</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        j += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#015692">if</span><span> (j % </span><span style="color:#b75501">10</span><span> === </span><span style="color:#b75501">0</span><span>) reject(</span><span style="color:#54790d">`</span><span class="hljs-subst" style="color:#54790d">${j}</span><span style="color:#54790d"> was dividable by 10`</span><span>);
</span><span>        </span><span style="color:#015692">else</span><span> resolve(j);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> one = useRemoteData(freshData, { </span><span style="color:#015692">invalidation</span><span>: InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">1000</span><span>) });
</span><span>    </span><span style="color:#015692">const</span><span> two = useRemoteData(failSometimes, { </span><span style="color:#015692">invalidation</span><span>: InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">100</span><span>) });
</span>
<span>    </span><span style="color:#015692">return</span><span> </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{RemoteDataStore.all(one,</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">two</span><span class="xml hljs-tag">)}&gt;</span><span class="xml">
</span><span class="xml">        {([num1, num2]) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">{num1} - {num2}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">    </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>;
</span>};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div></div><div><h2>Dynamic data</h2>Do you want to fetch paginated data? fetch quite a few ids out of many? You&#x27;re covered here too, by the<code>useRemoteDatas</code> (plural) hook. In this case you provide a function to a <code>Promise</code> <!-- -->which takes a parameter, and you ask the resulting <code>RemoteDataStores</code> structure for the corresponding pages/ids.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> {
</span>    InvalidationStrategy,
<!-- -->    RemoteDataStore,
<!-- -->    RemoteDataStores,
<!-- -->    useRemoteDatas,
<!-- -->    WithRemoteData,
<span>} </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">let</span><span> is = </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Map</span><span>&lt;</span><span style="color:#b75501">string</span><span>, </span><span style="color:#b75501">number</span><span>&gt;();
</span>
<span></span><span style="color:#015692">const</span><span> freshData = (key: </span><span style="color:#b75501">string</span><span>): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">string</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        </span><span style="color:#015692">const</span><span> num = is.get(key) || </span><span style="color:#b75501">0</span><span>;
</span><span>        is.set(key, num + </span><span style="color:#b75501">1</span><span>);
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(</span><span style="color:#54790d">`</span><span class="hljs-subst" style="color:#54790d">${key}</span><span style="color:#54790d">: </span><span class="hljs-subst" style="color:#54790d">${num}</span><span style="color:#54790d">`</span><span>), </span><span style="color:#b75501">500</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#656e77">// provide `freshData` function</span><span>
</span><span>    </span><span style="color:#015692">const</span><span> stores: RemoteDataStores&lt;</span><span style="color:#b75501">string</span><span>, </span><span style="color:#b75501">string</span><span>&gt; = useRemoteDatas(freshData, { </span><span style="color:#015692">invalidation</span><span>: InvalidationStrategy.refetchAfterMillis(</span><span style="color:#b75501">1000</span><span>) });
</span>
<span>  </span><span style="color:#015692">const</span><span> [wanted, setWanted] = React.useState(</span><span style="color:#54790d">&#x27;a, b,d&#x27;</span><span>);
</span>
<span>    </span><span style="color:#015692">const</span><span> parsedWanted: </span><span style="color:#015692">readonly</span><span> </span><span style="color:#b75501">string</span><span>[] =
</span>      wanted
<span>        .split(</span><span style="color:#54790d">&#x27;,&#x27;</span><span>)
</span><span>        .map(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">s</span><span class="hljs-function">) =&gt;</span><span> s.trim())
</span><span>        .filter(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">s</span><span class="hljs-function">) =&gt;</span><span> s.length &gt; </span><span style="color:#b75501">0</span><span>);
</span>
<span>    </span><span style="color:#015692">const</span><span> currentStores: </span><span style="color:#015692">readonly</span><span> RemoteDataStore&lt;</span><span style="color:#b75501">string</span><span>&gt;[] =
</span>      stores.getMany(parsedWanted);
<!-- -->
<span>    </span><span style="color:#015692">return</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            Add/remove stores by editing the text, it&#x27;s split by comma.
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">input</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">value</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{wanted}</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">onChange</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{(e)</span><span class="xml hljs-tag"> =&gt;</span><span class="xml"> setWanted(e.currentTarget.value)} /&gt;
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">display:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">flex</span><span class="xml hljs-tag">&#x27;, </span><span class="xml hljs-tag" style="color:#015692">justifyContent:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">space-around</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">
</span><span class="xml">              </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">Column</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">rows</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{currentStores}</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">              </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">Column</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">rows</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{currentStores}</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span>
</span>    );
<!-- -->};
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Column: React.FC&lt;{ </span><span style="color:#015692">rows</span><span>: </span><span style="color:#015692">readonly</span><span> RemoteDataStore&lt;</span><span style="color:#b75501">string</span><span>&gt;[] }&gt; = </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">{ rows }</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> renderedRows = rows.map(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">store, idx</span><span class="hljs-function">) =&gt;</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">key</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{idx}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            {(value, isInvalidated) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">p</span><span class="xml hljs-tag">&gt;</span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">color:</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">isInvalidated</span><span class="xml hljs-tag"> ? &#x27;</span><span class="xml hljs-tag" style="color:#015692">darkgray</span><span class="xml hljs-tag">&#x27; </span><span class="xml hljs-tag" style="color:#015692">:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">black</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">{value}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">p</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span>
</span>    ));
<span>    </span><span style="color:#015692">return</span><span> </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">{renderedRows}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span>;
</span>};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div></div><div><h2>Invalidate on dependency change</h2><code>use-remote-data</code> follows the spirit of <code>useEffect</code> and friends by supporting an array of dependencies. When a change is detected in that list, the data is automatically invalidated. Note that currently the <code>JSON.stringify</code>ed version of the dependencies is compared.<div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#2f3337;background:#f6f6f6"><code class="language-typescript" style="white-space:pre"><span style="color:#015692">import</span><span> * </span><span style="color:#015692">as</span><span> React </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;react&#x27;</span><span>;
</span><span></span><span style="color:#015692">import</span><span> { useRemoteData, WithRemoteData } </span><span style="color:#015692">from</span><span> </span><span style="color:#54790d">&#x27;use-remote-data&#x27;</span><span>;
</span>
<span></span><span style="color:#015692">var</span><span> i = </span><span style="color:#b75501">0</span><span>;
</span><span></span><span style="color:#015692">const</span><span> freshData = (): </span><span style="color:#b75501">Promise</span><span>&lt;</span><span style="color:#b75501">number</span><span>&gt; =&gt;
</span><span>    </span><span style="color:#015692">new</span><span> </span><span style="color:#b75501">Promise</span><span>(</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">resolve</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>        i += </span><span style="color:#b75501">1</span><span>;
</span><span>        </span><span style="color:#b75501">setTimeout</span><span>(</span><span class="hljs-function">() =&gt;</span><span> resolve(i), </span><span style="color:#b75501">1000</span><span>);
</span>    });
<!-- -->
<span></span><span style="color:#015692">export</span><span> </span><span style="color:#015692">const</span><span> Component: React.FC = </span><span class="hljs-function">() =&gt;</span><span> {
</span><span>    </span><span style="color:#015692">const</span><span> [dep, setDep] = React.useState(</span><span style="color:#b75501">1</span><span>);
</span><span>    </span><span style="color:#015692">const</span><span> store = useRemoteData(freshData, { </span><span style="color:#015692">dependencies</span><span>: [dep] });
</span>
<span>    </span><span style="color:#015692">return</span><span> (
</span><span>        </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">button</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">onClick</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{()</span><span class="xml hljs-tag"> =&gt;</span><span class="xml"> setDep(dep + 1)}&gt;Bump dep</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">button</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">br</span><span class="xml hljs-tag"> /&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">store</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{store}</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">                {(num, isInvalidated) =&gt; </span><span class="xml hljs-tag">&lt;</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">style</span><span class="xml hljs-tag">=</span><span class="xml hljs-tag" style="color:#54790d">{{</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">color:</span><span class="xml hljs-tag"> </span><span class="xml hljs-tag" style="color:#015692">isInvalidated</span><span class="xml hljs-tag"> ? &#x27;</span><span class="xml hljs-tag" style="color:#015692">darkgray</span><span class="xml hljs-tag">&#x27; </span><span class="xml hljs-tag" style="color:#015692">:</span><span class="xml hljs-tag"> &#x27;</span><span class="xml hljs-tag" style="color:#015692">black</span><span class="xml hljs-tag">&#x27; }}&gt;</span><span class="xml">{num}</span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">span</span><span class="xml hljs-tag">&gt;</span><span class="xml">}
</span><span class="xml">            </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">WithRemoteData</span><span class="xml hljs-tag">&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml hljs-tag">&lt;/</span><span class="xml hljs-tag" style="color:#b75501">div</span><span class="xml hljs-tag">&gt;</span><span>
</span>    );
<!-- -->};
</code></pre><div><div><a class="button button--secondary button--sm">Run snippet</a></div></div></div></div></main></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/use-remote-data/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oyvindberg/use-remote-data" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Øyvind Raddum Berg</div></div></div></footer></div>
</body>
</html>